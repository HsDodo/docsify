### Go面试题

> 比go基础更深一些

#### 逃逸分析有什么用？

​	逃逸分析把变量合理地分配到它该去的地方，“找准自己的位置”。即使是用 new 函数申请到 的内存，如果编译器发现这块内存在退出函数后就没有使用了，那就分配到栈上，毕竟栈上的内存 分配比堆上快很多；反之，即使表面上只是一个普通的变量，但是经过编译器的逃逸分析后发现， 在函数之外还有其他的地方在引用，那就分配到堆上。真正地做到“按需分配”。 

如果变量都分配到堆上，堆不像栈可以自动清理。就会引起 Go 频繁地进行垃圾回收，而垃圾 回收会占用比较大的系统开销。 

**主要原因**：通过逃逸分析，可以尽量把那些不需要分配到堆上的变量直接分配到栈上，堆上的变量少了， 会减轻堆内存分配的开销，同时也会减少垃圾回收（Garbage Collection，GC）的压力，提高程序的 运行速度。 

